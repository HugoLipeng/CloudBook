# 对象的创建，内存布局和访问定位

## 1.对象的创建

1. 虚拟机遇到一个 new 指令时，首先将去检查这个指令的参数是否能在常量池中定位到一个类的符号引用；
2. 检查这个符号引用代表的类是否已经被加载，解析和初始化过。如果没有。那必须的先执行响应的类加载过程。
3. 在类加载检查通过后，为新生对象分配内存。对象所需的内存大小在类加载完成后便可完全确定。

## 2.对象的内存布局

**分为3个区域：对象头，实例数据，对齐填充**

### 对象头

包括两部分信息，第一部分：对象自身的运行时数据，如哈希吗，GC分代年龄，锁状态标志，线程持有的锁，偏向线程ID，偏向时间戳等，这部分数据的长度在 32位和64位的虚拟机中分别为 32bit和 64bit，官方称他为 "Mark Word"；

 第二部分：类型指针，即对象指向它的类元数据的指针，虚拟机通过这个指针来确定这个对象时哪个类的实例。如果对象是一个 java 数组，那么在对象头中还必须有一块用于记录数组长度的数据。

### 实例数据：

是对象真正存储的有效信息，也是在程序代码中所定义的各种类型的字段内容。

### 对齐填充：

对齐填充不是必然存在的。HotSpot VM的自动