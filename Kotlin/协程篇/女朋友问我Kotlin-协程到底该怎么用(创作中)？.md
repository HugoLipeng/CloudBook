# 女朋友问我Kotlin-协程到底该怎么用？

## 协程导航器

> 通过本篇你可以学会什么？

- 协程创建的流程
- Job与CoroutineContext傻傻分得清
- 协程异常的传递流程
- 协程的异常如何处理
- 如何定义一个安全的全局协程
- 如何在View中使用协程



在Lifecycle-ktx中，虽然已经提供了 **lifecycleScope** 和 **viewModelScope**,并且会在相应的生命周期结束时会停止取消协程，但这就足够吗？



## Job与CoroutineContext

### Job

Job用于处理协程，对于每一个我们所创建的协程，都会返回一个 Job 实例，该实例是协程的唯一标识，并且负责管理协程的生命周期。







### 协程的失败传递流程

当一个协程由于异常失败时，它会传播这个异常并传递到父级，接下来，父级会经历下述几个步骤：

- 取消它自己的子协程
- 取消自己
- 将异常传递给父级协程

