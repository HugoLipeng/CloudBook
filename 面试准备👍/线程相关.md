# 线程相关

### 什么是线程？和进程有什么关系？线程的状态？创建线程的方式？

#### 线程：

> 1. 线程是操作系统调度的最小单元，也叫轻量级进程。
> 2. 一个进程中可以创建多个线程，这些线程都拥有各自的计数器，堆栈和局部变量等属性，并且能够访问共享的内存变量。(后半部分与Java内存模型有关)

#### 进程：

> 进程是操作系统结构的基础，是程序在一个数据集合上运行的过程，是系统进行资源分配和调度的基本单位。可以说，进程是程序的实体，同时也是线程的容器。

#### 线程状态：

> - 创建
> - 可运行状态
> - 阻塞状态
> - 等待状态(Waiting)
> - 超时等待状态(在指定时间可以自行返回)
> - 终止状态（正常终止，执行完run方法；异常终止）

#### 创建线程

> - 继承Thread，重写run方法
> - 实现Runnable
> - 实现Callable接口，重写call方法(可以在任务接受后提供一个返回值，Call方法可以抛出异常)



### synchronized

理解 Java 中的 synchronized 关键字。

#### 锁静态方法时与锁非静态方法时的区别有哪些？

> 1. 锁非静态方法时，当在线程中调用时相当于一个对象锁，所以多个对象同时调用，并没有同步作用，当一个对象多线程调用时，相当于阻塞。
> 2. 锁静态方法时，无论何时调用，都是线程安全的，因为此时锁的是这个类，再多对象都只有同一个把锁。



#### 重入锁是什么？

> 即支持一个线程对资源的重复加锁。



### volatile是什么？有什么用？

说这个必须先提一下 java内存模型。

> Java内存模型描述了程序中各个变量(实例域，静态域和数组元素)之间的关系，以及在实际计算机系统中将变量存储到内存和从内存取出变量的底层细节，但是需要注意的是，我们平时编程中使用的变量并不包含并其中。
>
> java内存模型定义了线程和主存之间的抽象关系：**线程之间的共享变量存储在主存中，每一个线程都有一个私有的本地内存，本地内存中存储了该线程共享变量的副本。 所以当没有用voltile修饰时，多线程情况下，如果变量的值更改，并不会及时写入主存，这个时候就会出现数据异常。**

> 当一个共享变量被其修饰之后，它被别的线程更改了值后，将直接写入主存，别的线程立即可见，并禁止使用指令重排序。
>
> 可见性
>
> 不保证原子性：原子性操作是指(赋值与读取，如果++就不是原子性操作。)
>
> 有序性



### 讲一下常用的线程池执行流程，及常用的线程池？

> 提交任务后，线程池先是否达到判断核心线程数，如果没有则创建，否则下一步，接着判断任务队列是否满了，如果没满，就将任务添加到队列中，否则就执行下一步操作。接着判断是否达到最大线程数，如果达到则执行饱和策略，默认抛出RejectedExecutionException异常。

